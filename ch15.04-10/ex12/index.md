# pushState と hashchange の動作比較

## Active や Completed を選択後にブラウザをリロードするとどうなるか

### 結果
404エラーになる

---

## hashchange（ex11）と pushState（ex12）の違い

### リロード時の動作

#### hashchange の場合
- ブラウザは `/ex11` に対してリクエストを送信
- `#all` などのハッシュ部分はサーバーに送信されない
- 元の `/ex11` のページが表示される

#### pushState の場合
- ブラウザは `/ex12/all` に対してリクエストを送信
- `ex12/all` というページは実際には存在しないため、404エラーになる

---

### それぞれの実装

#### hashchange
- 現在のページに対してハッシュ（`#`）を付加する
- ページ遷移は発生せず、JavaScriptで状態を管理
- サーバーへのリクエストは発生しない
- `hashchange` イベントでハッシュの変更を検知

#### pushState
- `history.pushState()` でブラウザの履歴スタックに新しいエントリを追加
- ページ遷移は発生しないが、アドレスバーのURLは変更される
- リロード時は変更後のURLに対してサーバーリクエストが発生
- `popstate` イベントで履歴の変更を検知

---

## サーバー側がどのような挙動をすれば pushState を使った実装が期待通り動作するか

-  すべてのURLのパスで同じページに遷移する（/ex12 も /ex12/all も同じページを返す）
- URLのパスに応じてJavaScriptが実行され、適切な画面が表示される

### → SPA（シングルページアプリケーション）
- 1つのページしか持たず、JavaScriptを使って動的にページの内容を書き換えることで、画面遷移を実現するアプリケーション
